apiVersion: v1
kind: ConfigMap
metadata:
  name: seata-server-config
  namespace: seata
data:
  registry.conf: |
    registry {
      type = "nacos"
      nacos {
        application = "seata-service"
        serverAddr = "nacos-service.nacos:8848"
        namespace = ""
        username = "nacos"
        password = "nacos"
      }
    }
    config {
      type = "nacos"
      nacos {
        serverAddr = "nacos-service.nacos:8848"
        namespace = ""
        username = "nacos"
        password = "nacos"
      }
    }
  file.conf: |
    store {
   
      mode = "db"
      db {
        datasource = "hikari"
        dbType = "mysql"
        driverClassName = "com.mysql.jdbc.Driver"
        url = "jdbc:mysql://mysql-service.mysql:3306/seata?rewriteBatchedStatements=true"
        user = "root"
        password = "123456"
        minConn = 5
        maxConn = 100
        globalTable = "global_table"
        branchTable = "branch_table"
        lockTable = "lock_table"
        queryLimit = 100
        maxWait = 5000
      }
    }
